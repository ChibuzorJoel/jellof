<!-- Overlay for mobile menu -->
<div 
  class="overlay" 
  [class.active]="isMenuOpen" 
  (click)="closeMenu()">
</div>

<header class="main-header">
  <div class="container header-content">

    <!-- LOGO -->
    <div class="logo" routerLink="/">
      <h1>JELLOF</h1>
      <span class="tagline">Sustainable Fashion</span>
    </div>

    <!-- DESKTOP NAV -->
    <nav class="desktop-nav">
      <a routerLink="/" routerLinkActive="active" [routerLinkActiveOptions]="{ exact: true }">Home</a>
      <a routerLink="/collections" routerLinkActive="active">Collections</a>
      <a routerLink="/lookbook" routerLinkActive="active">Lookbook</a>
      <a routerLink="/about" routerLinkActive="active">About</a>
      <a routerLink="/contact" routerLinkActive="active">Contact</a>
      <a routerLink="/admin/login" class="admin-link">Admin</a>
    </nav>

    <!-- HEADER ACTIONS -->
    <div class="header-actions">

      <!-- CART -->
      <div class="cart-wrapper">
        <button 
          class="cart-btn" 
          (click)="toggleCartDropdown()"
          [class.has-items]="cartItemCount > 0"
          title="Shopping Cart">
          
          <!-- Cart Icon SVG -->
          <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <circle cx="9" cy="21" r="1"></circle>
            <circle cx="20" cy="21" r="1"></circle>
            <path d="M1 1h4l2.68 13.39a2 2 0 0 0 2 1.61h9.72a2 2 0 0 0 2-1.61L23 6H6"></path>
          </svg>
          
          <!-- Cart Count Badge -->
          <span class="cart-count" *ngIf="cartItemCount > 0">
            {{ cartItemCount }}
          </span>
        </button>

        <!-- CART DROPDOWN -->
        <div class="cart-dropdown" *ngIf="isCartDropdownOpen">
          
          <!-- Dropdown Header -->
          <div class="cart-dropdown-header">
            <h3>Shopping Cart</h3>
            <button class="close-btn" (click)="closeCartDropdown()">✕</button>
          </div>

          <!-- Empty Cart State -->
          <div class="empty-cart" *ngIf="cartItemCount === 0">
            <svg width="64" height="64" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
              <circle cx="9" cy="21" r="1"></circle>
              <circle cx="20" cy="21" r="1"></circle>
              <path d="M1 1h4l2.68 13.39a2 2 0 0 0 2 1.61h9.72a2 2 0 0 0 2-1.61L23 6H6"></path>
            </svg>
            <p>Your cart is empty</p>
            <button 
              class="continue-shopping-btn" 
              routerLink="/collections" 
              (click)="closeCartDropdown()">
              Continue Shopping
            </button>
          </div>

          <!-- Cart Items -->
          <div class="cart-items-container" *ngIf="cartItemCount > 0">
            <div class="cart-items">
              <div 
                class="cart-item"
                *ngFor="let item of getCartItems(); let i = index">

                <!-- Product Image -->
                <img 
                  [src]="item.product.image" 
                  [alt]="item.product.name"
                  class="cart-item-image">
                
                <!-- Product Details -->
                <div class="cart-item-details">
                  <h4 class="cart-item-name">{{ item.product.name }}</h4>
                  <p class="cart-item-meta">
                    <span *ngIf="item.selectedSize">Size: {{ item.selectedSize }}</span>
                    <span *ngIf="item.selectedColor"> • {{ item.selectedColor }}</span>
                  </p>
                  <p class="cart-item-price">
                    {{ item.quantity }} × ${{ item.product.price.toFixed(2) }}
                  </p>
                </div>

                <!-- Remove Button -->
                <button 
                  class="remove-item-btn" 
                  (click)="removeItem(i)"
                  title="Remove item">
                  <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <line x1="18" y1="6" x2="6" y2="18"></line>
                    <line x1="6" y1="6" x2="18" y2="18"></line>
                  </svg>
                </button>
              </div>
            </div>

            <!-- Cart Footer -->
            <div class="cart-footer">
              <div class="cart-total">
                <span>Subtotal:</span>
                <strong>${{ getCartTotal().toFixed(2) }}</strong>
              </div>
              <p class="cart-notice">Shipping & taxes calculated at checkout</p>
              <button 
                class="checkout-btn" 
                routerLink="/checkout"
                (click)="closeCartDropdown()">
                Checkout
              </button>
              <button 
                class="view-cart-btn" 
                routerLink="/cart"
                (click)="closeCartDropdown()">
                View Cart
              </button>
            </div>
          </div>

        </div>
      </div>

      <!-- MOBILE MENU BUTTON -->
      <div class="hamburger" (click)="toggleMenu()" [class.active]="isMenuOpen">
        <span></span>
        <span></span>
        <span></span>
      </div>

    </div>
  </div>

  <!-- MOBILE NAV -->
  <nav class="mobile-nav" [class.open]="isMenuOpen">
    <a routerLink="/" (click)="closeMenu()" routerLinkActive="active" [routerLinkActiveOptions]="{ exact: true }">Home</a>
    <a routerLink="/collections" (click)="closeMenu()" routerLinkActive="active">Collections</a>
    <a routerLink="/lookbook" (click)="closeMenu()" routerLinkActive="active">Lookbook</a>
    <a routerLink="/about" (click)="closeMenu()" routerLinkActive="active">About</a>
    <a routerLink="/contact" (click)="closeMenu()" routerLinkActive="active">Contact</a>
    <a routerLink="/admin/login" (click)="closeMenu()" class="admin-link">Admin</a>
  </nav>
</header>