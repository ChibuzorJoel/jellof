<div class="cart-page">
    <div class="container">
      
      <!-- Page Title -->
      <div class="page-header">
        <h1>Shopping Cart</h1>
        <p class="item-count">{{ cartItems.length }} item{{ cartItems.length !== 1 ? 's' : '' }} in your cart</p>
      </div>
  
      <!-- Empty Cart State -->
      <div class="empty-cart" *ngIf="cartItems.length === 0">
        <div class="empty-icon">
          <svg width="120" height="120" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1">
            <circle cx="9" cy="21" r="1"></circle>
            <circle cx="20" cy="21" r="1"></circle>
            <path d="M1 1h4l2.68 13.39a2 2 0 0 0 2 1.61h9.72a2 2 0 0 0 2-1.61L23 6H6"></path>
          </svg>
        </div>
        <h2>Your cart is empty</h2>
        <p>Looks like you haven't added any items to your cart yet.</p>
        <button class="btn-primary" (click)="continueShopping()">
          Start Shopping
        </button>
      </div>
  
      <!-- Cart Content -->
      <div class="cart-content" *ngIf="cartItems.length > 0">
        
        <!-- Cart Items (Left Side) -->
        <div class="cart-items">
          
          <!-- Clear Cart Button -->
          <div class="cart-header">
            <h2>Cart Items</h2>
            <button class="btn-clear" (click)="clearCart()">Clear Cart</button>
          </div>
  
          <!-- Cart Item -->
          <div class="cart-item" *ngFor="let item of cartItems; let i = index">
            
            <!-- Product Image -->
            <div class="item-image">
              <img [src]="item.product.image" [alt]="item.product.name">
            </div>
  
            <!-- Product Details -->
            <div class="item-details">
              <h3 class="item-name">{{ item.product.name }}</h3>
              <p class="item-category">{{ item.product.category }}</p>
              
              <!-- Variants -->
              <div class="item-variants">
                <span class="variant" *ngIf="item.selectedSize">
                  Size: <strong>{{ item.selectedSize }}</strong>
                </span>
                <span class="variant" *ngIf="item.selectedColor">
                  Color: 
                  <span 
                    class="color-swatch" 
                    [style.background-color]="item.selectedColor"
                    [title]="item.selectedColor">
                  </span>
                </span>
              </div>
  
              <!-- Mobile Price -->
              <p class="item-price mobile-only">${{ item.product.price.toFixed(2) }}</p>
            </div>
  
            <!-- Price (Desktop) -->
            <div class="item-price desktop-only">
              <p>${{ item.product.price.toFixed(2) }}</p>
            </div>
  
            <!-- Quantity Controls -->
            <div class="item-quantity">
              <button class="qty-btn" (click)="decreaseQuantity(i)">‚àí</button>
              <input 
                type="number" 
                [value]="item.quantity"
                (change)="updateQuantity(i, $any($event.target).value)"
                min="1"
                max="99"
                class="qty-input">
              <button class="qty-btn" (click)="increaseQuantity(i)">+</button>
            </div>
  
            <!-- Item Total -->
            <div class="item-total">
              <p>${{ getItemTotal(item).toFixed(2) }}</p>
            </div>
  
            <!-- Remove Button -->
            <button class="btn-remove" (click)="removeItem(i)" title="Remove item">
              <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <line x1="18" y1="6" x2="6" y2="18"></line>
                <line x1="6" y1="6" x2="18" y2="18"></line>
              </svg>
            </button>
          </div>
  
          <!-- Continue Shopping Button -->
          <button class="btn-continue" (click)="continueShopping()">
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <line x1="19" y1="12" x2="5" y2="12"></line>
              <polyline points="12 19 5 12 12 5"></polyline>
            </svg>
            Continue Shopping
          </button>
        </div>
  
        <!-- Order Summary (Right Side) -->
        <div class="cart-summary">
          <h2>Order Summary</h2>
  
          <!-- Coupon Code -->
          <div class="coupon-section">
            <h3>Coupon Code</h3>
            <div class="coupon-input-group">
              <input 
                type="text" 
                [(ngModel)]="couponCode"
                name="coupon"
                placeholder="Enter coupon code"
                [disabled]="appliedCoupon"
                class="coupon-input">
              <button 
                class="btn-apply"
                (click)="applyCoupon()"
                *ngIf="!appliedCoupon">
                Apply
              </button>
              <button 
                class="btn-remove-coupon"
                (click)="removeCoupon()"
                *ngIf="appliedCoupon">
                Remove
              </button>
            </div>
            <p class="coupon-applied" *ngIf="appliedCoupon">
              ‚úì Coupon "{{ appliedCoupon.code }}" applied
            </p>
          </div>
  
          <!-- Shipping Options -->
          <div class="shipping-section">
            <h3>Shipping Method</h3>
            <div class="shipping-options">
              <label 
                *ngFor="let option of shippingOptions"
                class="shipping-option"
                [class.selected]="selectedShipping === option.id">
                <input 
                  type="radio" 
                  name="shipping"
                  [value]="option.id"
                  [(ngModel)]="selectedShipping"
                  (change)="onShippingChange()">
                <div class="option-content">
                  <span class="option-name">{{ option.name }}</span>
                  <span class="option-price">
                    {{ option.price === 0 ? 'FREE' : '$' + option.price.toFixed(2) }}
                  </span>
                </div>
              </label>
            </div>
          </div>
  
          <!-- Price Breakdown -->
          <div class="price-breakdown">
            <div class="price-row">
              <span>Subtotal:</span>
              <span>${{ subtotal.toFixed(2) }}</span>
            </div>
  
            <div class="price-row" *ngIf="discount > 0">
              <span>Discount:</span>
              <span class="discount">-${{ discount.toFixed(2) }}</span>
            </div>
  
            <div class="price-row">
              <span>Shipping:</span>
              <span>{{ shipping === 0 ? 'FREE' : '$' + shipping.toFixed(2) }}</span>
            </div>
  
            <div class="price-row">
              <span>Tax (7.5%):</span>
              <span>${{ tax.toFixed(2) }}</span>
            </div>
  
            <div class="price-row total">
              <span>Total:</span>
              <span>${{ total.toFixed(2) }}</span>
            </div>
          </div>
  
          <!-- Checkout Button -->
          <button class="btn-checkout" (click)="proceedToCheckout()">
            Proceed to Checkout
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <line x1="5" y1="12" x2="19" y2="12"></line>
              <polyline points="12 5 19 12 12 19"></polyline>
            </svg>
          </button>
  
          <!-- Security Badges -->
          <div class="security-badges">
            <div class="badge">
              <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <rect x="3" y="11" width="18" height="11" rx="2" ry="2"></rect>
                <path d="M7 11V7a5 5 0 0 1 10 0v4"></path>
              </svg>
              <span>Secure Checkout</span>
            </div>
            <div class="badge">
              <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"></path>
                <circle cx="12" cy="7" r="4"></circle>
              </svg>
              <span>Easy Returns</span>
            </div>
          </div>
  
          <!-- Payment Methods -->
          <div class="payment-methods">
            <p>We accept:</p>
            <div class="methods">
              <span class="method">üí≥ Card</span>
              <span class="method">üè¶ Bank</span>
              <span class="method">üí¨ WhatsApp</span>
            </div>
          </div>
        </div>
  
      </div>
    </div>
  </div>