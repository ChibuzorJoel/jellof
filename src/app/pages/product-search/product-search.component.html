<!-- Toolbar -->
<div class="collections-toolbar">
  <!-- Search -->
  <div class="search-box">
    <input 
      type="text" 
      placeholder="Search products..."
      [(ngModel)]="searchQuery"
      (keyup)="onSearch()"
      class="search-input">
    <span class="search-icon">üîç</span>
  </div>

  <!-- Sort -->
  <div class="sort-box">
    <label for="sort">Sort by:</label>
    <select id="sort" class="sort-select">
      <option value="featured">Featured</option>
      <option value="newest">Newest</option>
      <option value="price-low">Price: Low to High</option>
      <option value="price-high">Price: High to Low</option>
      <option value="name">Name: A-Z</option>
    </select>
  </div>
  <div class="account-dropdown-container">
  
    <!-- Account Button -->
    <button class="account-btn" (click)="toggleDropdown()" type="button">
      
      <!-- User Icon -->
      <svg class="user-icon" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
        <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"></path>
        <circle cx="12" cy="7" r="4"></circle>
      </svg>
  
      <!-- User Greeting or "Account" -->
      <div class="account-text">
        <span class="greeting" *ngIf="isLoggedIn()">Hi, {{ getUserFirstName() }}</span>
        <span class="greeting" *ngIf="!isLoggedIn()">Account</span>
        
        <!-- Dropdown Arrow -->
        <svg class="arrow-icon" 
             [class.open]="isDropdownOpen" 
             width="16" 
             height="16" 
             viewBox="0 0 24 24" 
             fill="none" 
             stroke="currentColor" 
             stroke-width="2">
          <polyline points="6 9 12 15 18 9"></polyline>
        </svg>
      </div>
    </button>
  
    <!-- Dropdown Menu -->
    <div class="dropdown-menu" *ngIf="isDropdownOpen">
      
      <!-- Not Logged In State -->
      <div class="dropdown-content" *ngIf="!isLoggedIn()">
        
        <!-- Welcome Message -->
        <div class="dropdown-header">
          <p class="welcome-text">Welcome to JELLOF</p>
          <p class="subtitle-text">Sign in to access your account</p>
        </div>
  
        <!-- Login/Register Buttons -->
        <div class="auth-buttons">
          <button class="btn-login" (click)="navigateToLogin()">
            Login
          </button>
          <button class="btn-register" (click)="navigateToRegister()">
            Create Account
          </button>
        </div>
  
        <!-- Divider -->
        <div class="dropdown-divider"></div>
  
        <!-- Guest Options -->
        <div class="dropdown-section">
          <p class="section-title">BROWSE AS GUEST</p>
          <a (click)="closeDropdown()" routerLink="/collections" class="dropdown-item">
            <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <circle cx="9" cy="21" r="1"></circle>
              <circle cx="20" cy="21" r="1"></circle>
              <path d="M1 1h4l2.68 13.39a2 2 0 0 0 2 1.61h9.72a2 2 0 0 0 2-1.61L23 6H6"></path>
            </svg>
            <span>Shop Collections</span>
          </a>
        </div>
      </div>
  
      <!-- Logged In State -->
      <div class="dropdown-content" *ngIf="isLoggedIn()">
        
        <!-- User Info Header -->
        <div class="dropdown-header logged-in">
          <div class="user-avatar">
            {{ getUserFirstName().charAt(0).toUpperCase() }}
          </div>
          <div class="user-details">
            <p class="user-name">{{ currentUser?.firstName }} {{ currentUser?.lastName }}</p>
            <p class="user-email">{{ currentUser?.email }}</p>
          </div>
        </div>
  
        <!-- Divider -->
        <div class="dropdown-divider"></div>
  
        <!-- Account Options -->
        <div class="dropdown-section">
          <p class="section-title">MY ACCOUNT</p>
          
          <button (click)="navigateToAccount()" class="dropdown-item">
            <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"></path>
              <circle cx="12" cy="7" r="4"></circle>
            </svg>
            <span>My Account</span>
          </button>
  
          <button (click)="navigateToOrders()" class="dropdown-item">
            <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"></path>
              <circle cx="12" cy="10" r="3"></circle>
            </svg>
            <span>Orders</span>
          </button>
  
          <button (click)="navigateToWishlist()" class="dropdown-item">
            <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z"></path>
            </svg>
            <span>Saved Items</span>
          </button>
        </div>
  
        <!-- Divider -->
        <div class="dropdown-divider"></div>
  
        <!-- Logout -->
        <div class="dropdown-section">
          <button (click)="logout()" class="dropdown-item logout-btn">
            <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"></path>
              <polyline points="16 17 21 12 16 7"></polyline>
              <line x1="21" y1="12" x2="9" y2="12"></line>
            </svg>
            <span>Logout</span>
          </button>
        </div>
      </div>
  
    </div>
  </div>
  <!-- View Mode Toggle -->
  <!-- <div class="view-toggle">
    <button class="view-btn" aria-label="Grid view">‚äû</button>
    <button class="view-btn" aria-label="List view">‚ò∞</button>
  </div> -->
</div>
